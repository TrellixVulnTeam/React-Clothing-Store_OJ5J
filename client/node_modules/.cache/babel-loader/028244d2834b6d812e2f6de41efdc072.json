{"ast":null,"code":"import { initializeApp } from \"firebase/app\";\nimport { getAuth, createUserWithEmailAndPassword, GoogleAuthProvider, signInWithPopup, signInWithEmailAndPassword } from \"firebase/auth\";\nimport { getFirestore, doc, getDoc, setDoc, collection, onSnapshot, writeBatch, query, getDocs } from \"firebase/firestore\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCOeYRqlVxEBQ6caOTL9752fz-yIqxFVIU\",\n  authDomain: \"clothing-store-a2dc9.firebaseapp.com\",\n  projectId: \"clothing-store-a2dc9\",\n  storageBucket: \"clothing-store-a2dc9.appspot.com\",\n  messagingSenderId: \"537356435582\",\n  appId: \"1:537356435582:web:d3ef0babefef90869b182f\",\n  measurementId: \"G-0ZB4QGWVPE\"\n};\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth();\nexport const firestore = getFirestore();\nconst provider = new GoogleAuthProvider();\nprovider.setCustomParameters({\n  prompt: \"select_account\"\n});\nconst userCollectionRef = collection(firestore, \"Users\");\nconst collectionRef = collection(firestore, \"collections\");\nexport const collectionQueries = query(collectionRef); //FIREBASE HELPER FUNCTIONS\n// export const pullCollectionInstance=async()=>{\n//     const queries=query(collectionRef)\n//     const unsubscribe=onSnapshot(queries,querySnapshot=>{\n//     //    console.log(querySnapshot)\n//        queryArray.push(querySnapshot.docs)\n//     })\n//     return convertCollectionSnapshotMap(queryArray)\n// }\n\nexport const convertCollectionSnapshotMap = collection => {\n  const transformedCollection = collection.docs.map(doc => {\n    const {\n      routeName,\n      title,\n      items\n    } = doc.data();\n    return {\n      id: doc.id,\n      routeName: routeName,\n      title,\n      items\n    };\n  });\n  console.log(transformedCollection);\n  return transformedCollection.reduce((accumalator, currentCollection) => {\n    accumalator[currentCollection.title.toLowerCase()] = currentCollection;\n    return accumalator;\n  }, {});\n};\nexport const addCollectionAndDocuments = async (collectionKey, ObjectToAdd) => {\n  const collectionRef = collection(firestore, collectionKey);\n  const batch = writeBatch(firestore);\n  ObjectToAdd.forEach(item => {\n    const newDocRef = doc(collectionRef, item.title);\n    batch.set(newDocRef, item); // console.log(newDocRef)\n  });\n  return await batch.commit();\n};\nexport const logOutUser = async () => {\n  try {\n    await auth.signOut();\n  } catch (error) {\n    console.log(\"Error logging out user\", error.message);\n  }\n};\nexport const getUserData = async userRef => {\n  // const [userData,setUserData]=useState(null)\n  try {\n    const docSnap = await getDoc(userRef);\n    return {\n      id: docSnap.id,\n      ...docSnap.data()\n    };\n  } catch (error) {\n    console.log(\"Error Retrieving User\", error.message);\n  }\n};\nexport const getUserSnapshot = async userRef => {\n  try {\n    return onSnapshot(doc(userCollectionRef, userRef.id));\n  } catch (error) {\n    console.log(\"Error Getting Snapshot\", error.message);\n  }\n};\nexport const signInUser = async (email, password) => {\n  try {\n    const loggedIn = await signInWithEmailAndPassword(auth, email, password);\n    console.log(loggedIn);\n  } catch (error) {\n    console.log(\"ISSUE SIGNING IN USER\", error.message);\n  }\n};\nexport const createUser = async (email, password, displayName) => {\n  try {\n    const logged = await createUserWithEmailAndPassword(auth, email, password);\n    const createdAt = new Date();\n    const user = {\n      firstname: displayName,\n      email: logged.user.email,\n      leg: \"legolas\",\n      createdAt\n    }; // addUserToDatabase(logged.user.uid,user)\n  } catch (error) {\n    console.log(\"Issue with creating user\", error.message);\n  }\n};\nexport const createUserProfileDocument = async (userAuth, additonalData) => {\n  if (!userAuth) return;\n  const userRef = doc(userCollectionRef, userAuth.uid);\n  const {\n    displayName,\n    email\n  } = userAuth;\n  const createdAt = new Date();\n\n  try {\n    await setDoc(userRef, {\n      displayName,\n      email,\n      createdAt,\n      ...additonalData\n    });\n  } catch (error) {\n    console.log('Error creating user', error.message);\n  }\n\n  return userRef;\n};\nexport const signInWithGoogle = () => {\n  try {\n    signInWithPopup(auth, provider).then(results => {\n      // const UID=results.user.uid;\n      const createdAt = new Date();\n      const user = {\n        firstname: results.user.displayName,\n        email: results.user.email,\n        leg: \"Leg\",\n        createdAt\n      }; // addUserToDatabase(UID,user)\n    });\n  } catch (error) {\n    //   const errorCode =error.code ;\n    const errorMsg = error.message;\n    console.log(error.message); //   console.log(error)\n  }\n};","map":{"version":3,"sources":["/home/omega/Documents/React-Clothing-Store/src/Firebase/firebase.utils.js"],"names":["initializeApp","getAuth","createUserWithEmailAndPassword","GoogleAuthProvider","signInWithPopup","signInWithEmailAndPassword","getFirestore","doc","getDoc","setDoc","collection","onSnapshot","writeBatch","query","getDocs","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","firestore","provider","setCustomParameters","prompt","userCollectionRef","collectionRef","collectionQueries","convertCollectionSnapshotMap","transformedCollection","docs","map","routeName","title","items","data","id","console","log","reduce","accumalator","currentCollection","toLowerCase","addCollectionAndDocuments","collectionKey","ObjectToAdd","batch","forEach","item","newDocRef","set","commit","logOutUser","signOut","error","message","getUserData","userRef","docSnap","getUserSnapshot","signInUser","email","password","loggedIn","createUser","displayName","logged","createdAt","Date","user","firstname","leg","createUserProfileDocument","userAuth","additonalData","uid","signInWithGoogle","then","results","errorMsg"],"mappings":"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","sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  GoogleAuthProvider,\n  signInWithPopup,\n  signInWithEmailAndPassword\n} from \"firebase/auth\";\nimport { \n    getFirestore,\n    doc,\n    getDoc,\n    setDoc,\n    collection,\n    onSnapshot,\n    writeBatch,\n    query,\n    getDocs\n } from \"firebase/firestore\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCOeYRqlVxEBQ6caOTL9752fz-yIqxFVIU\",\n  authDomain: \"clothing-store-a2dc9.firebaseapp.com\",\n  projectId: \"clothing-store-a2dc9\",\n  storageBucket: \"clothing-store-a2dc9.appspot.com\",\n  messagingSenderId: \"537356435582\",\n  appId: \"1:537356435582:web:d3ef0babefef90869b182f\",\n  measurementId: \"G-0ZB4QGWVPE\",\n};\n\nconst app = initializeApp(firebaseConfig);\n\nexport const auth = getAuth();\n\nexport const firestore = getFirestore();\n\nconst provider = new GoogleAuthProvider();\nprovider.setCustomParameters({ prompt: \"select_account\" });\n\nconst userCollectionRef=collection(firestore,\"Users\")\nconst collectionRef=collection(firestore,\"collections\")\nexport const collectionQueries=query(collectionRef)\n\n\n\n//FIREBASE HELPER FUNCTIONS\n// export const pullCollectionInstance=async()=>{\n//     const queries=query(collectionRef)\n//     const unsubscribe=onSnapshot(queries,querySnapshot=>{\n//     //    console.log(querySnapshot)\n//        queryArray.push(querySnapshot.docs)\n//     })\n\n//     return convertCollectionSnapshotMap(queryArray)\n// }\n\nexport const convertCollectionSnapshotMap=(collection)=>{\n    const transformedCollection=collection.docs.map((doc)=>{\n        const {routeName,title,items}=doc.data()\n\n        return{\n            id:doc.id,\n            routeName:routeName,\n            title,\n            items           \n        }\n    })\n    console.log(transformedCollection)\n    return transformedCollection.reduce((accumalator,currentCollection)=>{\n        accumalator[currentCollection.title.toLowerCase()]=currentCollection\n        return accumalator;\n    },{})\n    \n}\nexport const addCollectionAndDocuments=async (collectionKey,ObjectToAdd)=>{\n    const collectionRef=collection(firestore,collectionKey)\n    const batch=writeBatch(firestore)\n    ObjectToAdd.forEach((item)=>{\n        const newDocRef=doc(collectionRef,item.title)\n        batch.set(newDocRef,item)\n        // console.log(newDocRef)\n    })\n    return await batch.commit()  \n}\n\n\nexport const logOutUser=async()=>{\n    try {\n        await auth.signOut();\n    } catch (error) {\n        console.log(\"Error logging out user\",error.message)\n    }\n}\n\nexport const getUserData=async userRef=>{\n    // const [userData,setUserData]=useState(null)\n    try {\n        const docSnap=await getDoc(userRef)\n        return {\n            id:docSnap.id,\n            ...docSnap.data()}\n    } catch (error) {\n        console.log(\"Error Retrieving User\",error.message)\n    }\n\n}\n\nexport const getUserSnapshot =async(userRef)=>{\n    try {\n        return onSnapshot(doc(userCollectionRef,userRef.id))\n    } catch (error) {\n        console.log(\"Error Getting Snapshot\",error.message)\n    }\n}\n\nexport const signInUser=async(email,password)=>{\n    try {\n        const loggedIn=await signInWithEmailAndPassword(auth,email,password)\n        console.log(loggedIn)\n\n    } catch (error) {\n        console.log(\"ISSUE SIGNING IN USER\",error.message)\n    }\n}\n\nexport const createUser=async(email,password,displayName)=>{\n    try {\n        const logged=await createUserWithEmailAndPassword(auth,email,password)\n        const createdAt=new Date()\n\n        const user={\n            firstname:displayName,\n            email:logged.user.email,\n            leg:\"legolas\",\n            createdAt\n        }\n        // addUserToDatabase(logged.user.uid,user)\n    } catch (error) {\n        console.log(\"Issue with creating user\",error.message)\n    }\n  \n}\n\nexport const createUserProfileDocument=async (userAuth,additonalData)=>{\n    if(!userAuth) return;\n    \n    const userRef=doc(userCollectionRef,userAuth.uid)\n\n        const {displayName,email}=userAuth;\n        const createdAt=new Date();\n        try {\n            await setDoc(userRef,{\n                displayName,\n                email,\n                createdAt,\n                ...additonalData\n            })\n        } catch (error) {\n            console.log('Error creating user',error.message)\n        }\n    \n    return userRef;\n\n}\n\n \nexport const signInWithGoogle = () => {\n  try {\n    signInWithPopup(auth, provider).then((results) => {\n        // const UID=results.user.uid;\n        const createdAt=new Date()\n\n        const user={\n            firstname:results.user.displayName,\n            email:results.user.email,\n            leg:\"Leg\",\n            createdAt\n        }\n        // addUserToDatabase(UID,user)\n    });\n  } catch (error) {\n    //   const errorCode =error.code ;\n      const errorMsg=error.message;\n\n      console.log(error.message)\n    //   console.log(error)\n  }\n};\n"]},"metadata":{},"sourceType":"module"}